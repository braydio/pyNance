
name: Frontend CI



on:

  push:

    paths:

      - "frontend/**"

  pull_request:

    paths:

      - "frontend/**"



jobs:

  lint-format:

    name: Lint & Format

    runs-on: ubuntu-latest

    defaults:

      run:

        working-directory: frontend

    steps:

      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4

        with:

          node-version: 20

          cache: "npm"

          cache-dependency-path: frontend/package-lock.json

      - run: npm ci

      - run: npm run lint

      - run: npm run format



  build:

    name: Build

    runs-on: ubuntu-latest

    needs: [lint-format]

    defaults:

      run:

        working-directory: frontend

    steps:

      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4

        with:

          node-version: 20

          cache: "npm"

          cache-dependency-path: frontend/package-lock.json

      - run: npm ci

      - run: npm run build



  test:

    name: Unit & E2E Tests

    runs-on: ubuntu-latest

    needs: [build]

    defaults:

      run:

        working-directory: frontend

    steps:

      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4

        with:

          node-version: 20

          cache: "npm"

          cache-dependency-path: frontend/package-lock.json

      - run: npm ci

      - run: npx cypress install

      - run: npm run test:unit

      - run: |

          npm run test:e2e || npm run test:e2e:dev

