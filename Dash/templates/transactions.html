<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='themes/' + current_theme) }}">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
    <style>
    table td {
        text-align: left; /* Align text in cells */
        font-size: 12px; /* Smaller font size for compact layout */
        word-wrap: break-word; /* Ensure long text wraps */
        white-space: normal; /* Allow text to break into multiple lines */
    }
</style>

    </style>
</head>
<body>
    <header>
        <div>
            <h1>Transactions</h1>
            <h3>and more transactions</h3>
        </div>
    </div>
        <nav class="menu">
                <button onclick="window.location.href='/'">Dashboard</button>
                <button onclick="window.location.href='/accounts'">Accounts</button>
                <button onclick="window.location.href='/transactions'">Transactions</button>
                <button onclick="window.location.href='/settings'">Settings</button>
        </nav>
    </header>
    <main>
        <div class="controls">
            <!-- Section Header -->
            <div id="transactions-management-header">
                <h2>With a Sidebar Area</h2>
                <p>There will be buttons here and filters. This will allow for advanced functionalities. They will be very advanced and functional.</p>
                <!-- Link New Account Button -->
                <button id="side-button" onclick="">No Button</button>
            </div>

            <!-- Group Management -->
            <div id="group-management">
                <h2>Do A Thing</h2>
                <p>This text field will do something eventually, and when it does you will want to know about it.</p>
                <input type="text" id="group-name" placeholder="Enter group name" />
                <button id="lower-side-button" onclick="">Do Not Click</button>
                <!-- Refresh selected accounts -->
                <button id="lower-side-button2" onclick="">No click</button>
                <p id="group-status"></p>
            </div>

            <p id="status"></p>
        </div>
        <table id="transactions-table" class="display compact">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Transaction Name</th>
                    <th>Category</th>
                    <th>Merchant</th>
                    <th>Account Name</th>
                    <th>Institution</th>
                </tr>
            </thead>
            <tbody>
                {% if transactions %}
                    {% for transaction in transactions %}
                    <tr>
                        <td>{{ transaction.date }}</td>
                        <td class="{% if transaction.amount.startswith('(') %}negative{% endif %}">{{ transaction.amount }}</td>
                        <td>{{ transaction.name }}</td>
                        <td>{{ transaction.category | e }}</td> <!-- Escape special characters -->
                        <td>{{ transaction.merchant_name }}</td>
                        <td>{{ transaction.account_name }}</td>
                        <td>{{ transaction.institution_name }}</td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="7" style="text-align: center;">No transactions available.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </main>
    <footer>&copy; Brayden's Finance Dashroad</footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <!-- Local JS -->
    <script src="{{ url_for('static', filename='scripts/transactions.js') }}"></script>
</body>
</html>
